language: rust

node_js:
- "lts/*"

notifications:
  email: false

before_install:
- sudo apt-get update
- sudo apt-get install nodejs
- sudo apt-get install npm
- npm prune
- rustup target add wasm32-unknown-unknown --toolchain stable
- rustup default stable
- cwd=$(pwd -P)
- cd /
- cargo install wasm-gc
- cd $cwd

install:
- npm install

script:
- npm run build && npm run test:coveralls

cache:
  directories:
  - "node_modules"
