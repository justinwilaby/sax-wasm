language: node_js

node_js:
- "lts/*"

notifications:
  email: false

before_install:
- npm prune
- rustup install stable
- rustup target add wasm32-unknown-unknown --toolchain stable
- rustup default stable
- cwd=$(pwd -P)
- cd /
- cargo install wasm-gc
- cd $cwd

install:
- npm install

script:
- npm run build && npm run test:coveralls

cache:
  directories:
  - "node_modules"

matrix:
  include:
  - language: rust
  - language: node
